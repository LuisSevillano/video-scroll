!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([,function(t,e,r){var n=r(2);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(3)(!1)).push([t.i,"#scroll-indicator-container{position:fixed;top:50%;transform:translateY(-50%);right:5px;width:10px}@media (min-width:600px){#scroll-indicator-container{right:10px}}#scroll-indicator-container .scroll-indicator-dot{cursor:pointer;margin-bottom:10px;border-radius:50%;width:10px;height:10px;background-color:#dcdcdc;text-align:center}#scroll-indicator-container .scroll-indicator-dot.active{background-color:#646464;border:1px solid #fff}#scroll-steps{pointer-events:none;font-family:sans-serif;position:relative;z-index:10}@media (min-width:600px){#scroll-steps{padding:0 30px}}#scroll-steps .scroll-step{margin-left:5px;margin-right:5px;padding:15px;background:#fff;border-radius:2px;box-shadow:0 1px 2px rgba(0,0,0,.33)}@media (min-width:600px){#scroll-steps .scroll-step{margin-left:0;margin-right:0}}#scroll-steps .scroll-step.g-ghost-step{opacity:0}#scroll-steps .scroll-step.scroll-step-center{margin:0 auto}#scroll-steps .scroll-step.scroll-step-right{margin-left:auto}@media (min-width:600px){#scroll-steps .scroll-step{max-width:none;width:400px}}#scroll-steps .scroll-step:last-child{margin-bottom:0}#scroll-steps .scroll-step .step-content{pointer-events:none;display:block}#scroll-steps .scroll-step .step-content p{text-align:left;color:#000;font-weight:400;font-style:normal;line-height:1.5;font-size:16px;margin-bottom:10px}#g-scroll-vid video{width:100%;min-height:100%;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#g-scroll-vid{box-shadow:inset -10px 0 20px 0 #000}#g-scroll-vid h1{color:#f4f4f4!important;position:absolute;top:50%;text-shadow:0 1px 3px #211d1a,1px 0 3px #211d1a,-1px -1px 3px #211d1a,-1px 0 3px #211d1a;font-family:Frank Ruhl Libre,serif;font-size:3em;text-align:center}#g-scroll-vid #g-fixed{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:-1;overflow:hidden}body{background-color:#000;margin:0}#g-scroll-vid *,#g-scroll-vid :after,#g-scroll-vid :before{box-sizing:border-box}#g-scroll-vid ol[class],#g-scroll-vid ul[class]{padding:0}#g-scroll-vid blockquote,#g-scroll-vid body,#g-scroll-vid dd,#g-scroll-vid dl,#g-scroll-vid figcaption,#g-scroll-vid figure,#g-scroll-vid h1,#g-scroll-vid h2,#g-scroll-vid h3,#g-scroll-vid h4,#g-scroll-vid li,#g-scroll-vid ol[class],#g-scroll-vid p,#g-scroll-vid ul[class]{margin:0}#g-scroll-vid body{min-height:100vh;scroll-behavior:smooth;text-rendering:optimizeSpeed;line-height:1.5}#g-scroll-vid ol[class],#g-scroll-vid ul[class]{list-style:none}#g-scroll-vid a:not([class]){-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto}#g-scroll-vid img{max-width:100%;display:block}#g-scroll-vid article>*+*{margin-top:1em}#g-scroll-vid button,#g-scroll-vid input,#g-scroll-vid select,#g-scroll-vid textarea{font:inherit}@media (prefers-reduced-motion:reduce){#g-scroll-vid *{-webkit-animation-duration:.01ms!important;animation-duration:.01ms!important;-webkit-animation-iteration-count:1!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[r].concat(i).concat([o]).join("\n")}var s;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(t,e,r){var n,o,i={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),l=function(t,e){return e?e.querySelector(t):document.querySelector(t)},a=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=l.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,u=0,d=[],p=r(5);function f(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=i[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(b(n.parts[s],e))}else{var l=[];for(s=0;s<n.parts.length;s++)l.push(b(n.parts[s],e));i[n.id]={id:n.id,refs:1,parts:l}}}}function h(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};n[s]?n[s].parts.push(l):r.push(n[s]={id:s,parts:[l]})}return r}function g(t,e){var r=a(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=d[d.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),d.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertAt.before,r);r.insertBefore(e,o)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return y(e,t.attrs),g(t,e),e}function y(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function b(t,e){var r,n,o,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var s=u++;r=c||(c=m(e)),n=C.bind(null,r,s,!1),o=C.bind(null,r,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),g(t,e),e}(e),n=S.bind(null,r,e),o=function(){v(r),r.href&&URL.revokeObjectURL(r.href)}):(r=m(e),n=E.bind(null,r),o=function(){v(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=h(t,e);return f(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o];(l=i[s.id]).refs--,n.push(l)}t&&f(h(t,e),e);for(o=0;o<n.length;o++){var l;if(0===(l=n[o]).refs){for(var a=0;a<l.parts.length;a++)l.parts[a]();delete i[l.id]}}}};var w,x=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function C(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=x(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function E(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function S(t,e,r){var n=r.css,o=r.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(n=p(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(s),l&&URL.revokeObjectURL(l)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(t,e,r){"use strict";r.r(e);r(1);function n(){}function o(t,e){var r=new n;if(t instanceof n)t.each((function(t,e){r.set(e,t)}));else if(Array.isArray(t)){var o,i=-1,s=t.length;if(null==e)for(;++i<s;)r.set(i,t[i]);else for(;++i<s;)r.set(e(o=t[i],i,t),o)}else if(t)for(var l in t)r.set(l,t[l]);return r}n.prototype=o.prototype={constructor:n,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var i=o;function s(){}var l=i.prototype;function a(t,e){var r=new s;if(t instanceof s)t.each((function(t){r.add(t)}));else if(t){var n=-1,o=t.length;if(null==e)for(;++n<o;)r.add(t[n]);else for(;++n<o;)r.add(e(t[n],n,t))}return r}s.prototype=a.prototype={constructor:s,has:l.has,add:function(t){return this["$"+(t+="")]=t,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};var c={value:function(){}};function u(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new d(n)}function d(t){this._=t}function p(t,e){return t.trim().split(/^|\s+/).map((function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}}))}function f(t,e){for(var r,n=0,o=t.length;n<o;++n)if((r=t[n]).name===e)return r.value}function h(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=c,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}d.prototype=u.prototype={constructor:d,on:function(t,e){var r,n=this._,o=p(t+"",n),i=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<s;)if(r=(t=o[i]).type)n[r]=h(n[r],t.name,e);else if(null==e)for(r in n)n[r]=h(n[r],t.name,null);return this}for(;++i<s;)if((r=(t=o[i]).type)&&(r=f(n[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new d(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,o=new Array(r),i=0;i<r;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,r=(n=this._[t]).length;i<r;++i)n[i].value.apply(e,o)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};var g=u,v=function(t,e){var r,n,o,s,l=g("beforesend","progress","load","error"),a=i(),c=new XMLHttpRequest,u=null,d=null,p=0;function f(t){var e,n=c.status;if(!n&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||n>=200&&n<300||304===n){if(o)try{e=o.call(r,c)}catch(t){return void l.call("error",r,t)}else e=c;l.call("load",r,e)}else l.call("error",r,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=f:c.onreadystatechange=function(t){c.readyState>3&&f(t)},c.onprogress=function(t){l.call("progress",r,t)},r={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a.get(t):(null==e?a.remove(t):a.set(t,e+""),r)},mimeType:function(t){return arguments.length?(n=null==t?null:t+"",r):n},responseType:function(t){return arguments.length?(s=t,r):s},timeout:function(t){return arguments.length?(p=+t,r):p},user:function(t){return arguments.length<1?u:(u=null==t?null:t+"",r)},password:function(t){return arguments.length<1?d:(d=null==t?null:t+"",r)},response:function(t){return o=t,r},get:function(t,e){return r.send("GET",t,e)},post:function(t,e){return r.send("POST",t,e)},send:function(e,o,i){return c.open(e,t,!0,u,d),null==n||a.has("accept")||a.set("accept",n+",*/*"),c.setRequestHeader&&a.each((function(t,e){c.setRequestHeader(e,t)})),null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=s&&(c.responseType=s),p>0&&(c.timeout=p),null==i&&"function"==typeof o&&(i=o,o=null),null!=i&&1===i.length&&(i=function(t){return function(e,r){t(null==e?r:null)}}(i)),null!=i&&r.on("error",i).on("load",(function(t){i(null,t)})),l.call("beforesend",r,c),c.send(null==o?null:o),r},abort:function(){return c.abort(),r},on:function(){var t=l.on.apply(l,arguments);return t===l?r:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return r.get(e)}return r};var m=function(t,e){return function(r,n){var o=v(r).mimeType(t).response(e);if(null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return o.get(n)}return o}},y=(m("text/html",(function(t){return document.createRange().createContextualFragment(t.responseText)})),m("application/json",(function(t){return JSON.parse(t.responseText)})),m("text/plain",(function(t){return t.responseText})),m("application/xml",(function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e})),{}),b={};function w(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function x(t){var e=Object.create(null),r=[];return t.forEach((function(t){for(var n in t)n in e||r.push(e[n]=n)})),r}function C(t,e){var r=t+"",n=r.length;return n<e?new Array(e-n+1).join(0)+r:r}function E(t){var e,r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+C(-e,6):e>9999?"+"+C(e,6):C(e,4))+"-"+C(t.getUTCMonth()+1,2)+"-"+C(t.getUTCDate(),2)+(i?"T"+C(r,2)+":"+C(n,2)+":"+C(o,2)+"."+C(i,3)+"Z":o?"T"+C(r,2)+":"+C(n,2)+":"+C(o,2)+"Z":n||r?"T"+C(r,2)+":"+C(n,2)+"Z":"")}var S=function(t){var e=new RegExp('["'+t+"\n\r]"),r=t.charCodeAt(0);function n(t,e){var n,o=[],i=t.length,s=0,l=0,a=i<=0,c=!1;function u(){if(a)return b;if(c)return c=!1,y;var e,n,o=s;if(34===t.charCodeAt(o)){for(;s++<i&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=i?a=!0:10===(n=t.charCodeAt(s++))?c=!0:13===n&&(c=!0,10===t.charCodeAt(s)&&++s),t.slice(o+1,e-1).replace(/""/g,'"')}for(;s<i;){if(10===(n=t.charCodeAt(e=s++)))c=!0;else if(13===n)c=!0,10===t.charCodeAt(s)&&++s;else if(n!==r)continue;return t.slice(o,e)}return a=!0,t.slice(o,i)}for(10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i;(n=u())!==b;){for(var d=[];n!==y&&n!==b;)d.push(n),n=u();e&&null==(d=e(d,l++))||o.push(d)}return o}function o(e,r){return e.map((function(e){return r.map((function(t){return s(e[t])})).join(t)}))}function i(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?E(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var r,o,i=n(t,(function(t,n){if(r)return r(t,n-1);o=t,r=e?function(t,e){var r=w(t);return function(n,o){return e(r(n),o,t)}}(t,e):w(t)}));return i.columns=o||[],i},parseRows:n,format:function(e,r){return null==r&&(r=x(e)),[r.map(s).join(t)].concat(o(e,r)).join("\n")},formatBody:function(t,e){return null==e&&(e=x(t)),o(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")},formatRow:i,formatValue:s}},A=S(","),T=A.parse,O=(A.parseRows,A.format,A.formatBody,A.formatRows,A.formatRow,A.formatValue,function(t,e){return function(r,n,o){arguments.length<3&&(o=n,n=null);var i=v(r).mimeType(t);return i.row=function(t){return arguments.length?i.response(L(e,n=t)):n},i.row(n),o?i.get(o):i}});function L(t,e){return function(r){return t(r.responseText,e)}}var k=O("text/csv",T),_=S("\t"),R=_.parse;_.parseRows,_.format,_.formatBody,_.formatRows,_.formatRow,_.formatValue,O("text/tab-separated-values",R);new class{constructor(t){this.name="VideoScroll",this.el=document.querySelector("#g-scroll-vid"),this.vid=this.el.querySelector("#g-vid"),this.stepSelector=".scroll-step",this.steps,this.width=window.innerWidth,this.height=window.innerHeight,this.scroll_trigger=this.height,this.top_offset=0,this.endTime=0,this.setOptions(t),console.log(this)}setOptions(t){Object.keys(t).forEach(e=>{this[e]=t[e]},this)}init(){!this.configFile||this.data?(this.handleErrors(),this.steps={first_step_div:$(".scroll-steps .g-first"),last_step_div:$(".scroll-steps .g-last"),all:$(this.stepSelector)},this.width>this.height?this.height/this.width>=.65?this.loadVideo("med"):this.loadVideo("desktop"):this.loadVideo("mobile"),this.vid.ontimeupdate=()=>{this.timeUpdate()},this.scrollIndicator=new class{constructor(t){this.parent=document.querySelector("#g-scroll-vid"),this.steps=this.parent.querySelectorAll(".scroll-indicator"),this.el=this.parent.querySelector("#scroll-indicator-container"),this.animDuration=750,this.scrollOffset=-30,this.setOptions(t)}setOptions(t){Object.keys(t).forEach(e=>{this[e]=t[e]},this)}init(){if(console.log(this),!this.el){const t=document.createElement("div");t.setAttribute("id","scroll-indicator-container"),this.parent.append(t),this.el=t}this.dots=this.createDotsElements(),this.bindEvents()}createDotsElements(){return this.steps.forEach(t=>{const e=document.createElement("div");e.setAttribute("data-step",t.dataset.step),e.classList.add("scroll-indicator-dot"),this.el.append(e)}),this.el.querySelectorAll(".scroll-indicator-dot")}update(t){t&&(this.removeClasses(this.dots,"active"),this.el.querySelectorAll(".scroll-indicator-dot").forEach(e=>{e.dataset.step===t.dataset.step&&e.classList.add("active")},this))}removeClasses(t,e){t.forEach((t,r)=>{t.classList.remove(e)},this)}getStep(t){return Array.from(this.steps).filter(e=>e.dataset.step==t)[0]}bindEvents(){this.scrollEvents()}easeInCubic(t){return t*t*t}scrollToElem(t,e,r,n,o){const i=e-t;let s=i/r;s=Math.min(s,1);const l=this.easeInCubic(s);window.scroll(0,o+n*l),i<r&&requestAnimationFrame(e=>{const i=e||(new Date).getTime();this.scrollToElem(t,i,r,n,o)})}scrollEvents(t){const e=document.querySelectorAll(".scroll-indicator-dot");for(let t=0;t<e.length;t++){e[t].addEventListener("click",t=>{t.preventDefault();const e=t.target.dataset.step,r=Array.from(this.steps).filter(t=>t.dataset.step===e)[0];requestAnimationFrame(t=>{const e=t||(new Date).getTime(),n=this.animDuration,o=e,i=window.pageYOffset+this.scrollOffset,s=r.getBoundingClientRect().top;this.scrollToElem(o,e,n,s,i)})})}}}({animDuration:this.animDuration,scrollOffset:this.scrollOffset}),this.scrollIndicator.init(),this.setStepsHeight(),this.setActiveElement(),this.bindEvents(),this.isStarted()&&this.playStep($(".g-active"),!1)):this.loadConfiguration()}timeUpdate(){this.vid.currentTime>=this.endTime&&this.vid.pause()}ontimeupdate(){this.timeUpdate()}loadVideo(t){let e,r="";"mobile"==t?(e="g-vid-mobile",r="_mobile"):"med"==t?e="g-vid-med":"desktop"==t&&(e="g-vid-desktop"),this.el.querySelector("#g-vid").classList.add(e);const n=document.createElement("source"),o=document.createElement("source"),i=this.el.querySelector("#g-vid");n.setAttribute("src",i.getAttribute(`data-mp4${r}`)),o.setAttribute("src",i.getAttribute(`data-webm${r}`)),this.vid.appendChild(n),this.vid.appendChild(o),this.vid.load()}update(t,e,r,n){0===t||t?(0==t&&d3.select("#g-heading").transition().duration(250).style("opacity",0),d3.select("#g-fixed").transition().duration(250).style("opacity",1),this.endTime=r,this.vid.currentTime=e,this.vid.play()):($(".scroll-steps").removeClass("g-next").removeClass("g-prev").removeClass("g-active"),n?(this.vid.currentTime=0,this.vid.pause(),d3.select("#g-heading").transition().duration(250).style("opacity",1)):d3.select("#g-fixed").transition().duration(500).style("opacity",0))}resetVideo(){$(".scroll-steps").removeClass("g-next").removeClass("g-prev").removeClass("g-active"),$(".g-first").addClass("g-next"),d3.select("#g-heading").transition().duration(250).style("opacity",1),this.vid.currentTime=0,this.vid.pause()}playStep(t,e){const r=t.data("step"),n=t.data("start"),o=t.data("end");this.update(r,n,o,e),this.updatePrevNext(t)}updatePrevNext(t){t.addClass("g-active").removeClass("g-next").removeClass("g-prev").siblings().removeClass("g-active"),t.next().addClass("g-next").removeClass("g-active").removeClass("g-prev").siblings().removeClass("g-next"),t.prev().addClass("g-prev").removeClass("g-active").removeClass("g-next").siblings().removeClass("g-prev")}onScroll(t){const e=+this.steps.first_step_div.offset().top-t,r=$(".g-next").length,n=$(".g-prev").length,o=+this.steps.last_step_div.offset().top-t+this.steps.last_step_div.height();e<=this.scroll_trigger&&e>=this.top_offset&&!r?this.steps.first_step_div.addClass("g-next"):o>=this.top_offset&&o<=this.scroll_trigger&&!n&&this.steps.last_step_div.addClass("g-prev");let i=null;$(".g-next").length&&(i=+$(".g-next").offset().top-t);let s=null;n&&(s=+$(".g-prev").offset().top-t+$(".g-prev").height()),i&&i<=this.scroll_trigger&&this.playStep($(".g-next"),!1),s&&s>=this.top_offset&&this.playStep($(".g-prev"),!0),0===t&&this.resetVideo(),this.scrollIndicator.update(this.getActiveElement())}loadConfiguration(){k(this.configFile,(t,e)=>{if(t)throw t;this.data=e,this.setup(),delete this.configFile})}setup(){let t=this.el.querySelector("#scroll-steps");t&&t.parentNode.removeChild(t),t=document.createElement("div"),t.setAttribute("id","scroll-steps"),t.classList.add("scroll-steps"),this.data.forEach((e,r)=>{const n=document.createElement("div");n.classList.add("scroll-step"),this.setDataAttrs(n,e,r),n.innerHTML=e.texto,this.bulletIndicator&&n.classList.add("scroll-indicator"),0===r&&n.classList.add("g-first"),e.posicion&&n.classList.add(this.getAlignClass(e.posicion)),t.append(n)},this),this.el.append(t),this.createGhostSteps(t),this.init()}setDataAttrs(t,e,r){t.dataset.step=r,t.dataset.start=e.inicio,t.dataset.end=e.final}getAlignClass(t){return{izquierda:"scroll-step-left",derecha:"scroll-step-right",centro:"scroll-step-center"}[t]}createGhostSteps(t){const e=document.createElement("div");e.classList.add("scroll-step","g-ghost-step");const r=document.createElement("div");r.classList.add("scroll-step","g-last","g-ghost-step"),t.insertBefore(e,t.childNodes[0]),t.insertBefore(r,t.childNodes[t.childNodes.length])}bindEvents(){window.addEventListener("scroll",function(t){const e=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;this.onScroll(e)}.bind(this),!1),window.addEventListener("resize",function(){this.updateSizes()}.bind(this),!1)}updateSizes(){this.width=window.innerWidth,this.height=window.innerHeight,this.scroll_trigger=this.height,this.width>this.height?this.height/this.width>=.65?console.log("med"):console.log("desktop"):console.log("mobile")}setStepsHeight(){this.el.querySelectorAll(this.stepSelector).forEach(t=>{t.style.marginBottom=`${window.innerHeight-this.top_offset}px`},this)}isStarted(){return 0!==(window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop)}getActiveElement(){let t;return this.steps.all.each((e,r)=>{this.inViewport(r)&&(t=r)},this),t}setActiveElement(){this.steps.all.each((t,e)=>{this.inViewport(e)?this.addClass(e,"g-active"):this.removeClass(e,"g-active")},this)}inViewport(t){const e=t.getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return e.top>=0&&e.left>=0&&e.right<=r&&e.bottom<=n}getOffset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}getHeight(t){const e=window.getComputedStyle(t),r=t.offsetHeight,n=parseFloat(e.borderTopWidth);return r-parseFloat(e.borderBottomWidth)-n-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)}handleErrors(){this.el.querySelector("#scroll-steps")||console.error("Error","No existe el elemento #scroll-steps"),Array.from(this.el.querySelectorAll(".scroll-step")).every(t=>!(!t.classList.contains("g-ghost-step")&&!t.dataset.step))||console.error("Error","Alguno de los elementos que conforman las cartelas no tiene los atributos 'data' necesarios")}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}removeClassMany(t,e){Array.isArray(e)?t.forEach((t,r)=>{e.forEach(e=>{this.removeClass(t,e)},this)},this):t.forEach((t,r)=>{this.removeClass(t,e)},this)}}({stepSelector:".scroll-step",scrollOffset:-30,animDuration:750,configFile:"config.csv",bulletIndicator:!0}).init()}]);